<?xml version="1.0" encoding="UTF-8"?>
<!--
  ~ Copyright (c) 2010-2013 Evolveum
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->
<c:objects xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-2a">

    <object oid="00000000-0000-0000-0000-000000000003" xsi:type="c:ValuePolicyType" version="0" xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-2a" xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-2a"
            xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:t="http://prism.evolveum.com/xml/ns/public/types-2">
        <name>
            <t:orig>Default Password Policy</t:orig>
            <t:norm>default password policy</t:norm>
        </name>
        <description>Default password policy</description>
        <lifetime>
            <expiration>999</expiration>
            <warnBeforeExpiration>9</warnBeforeExpiration>
            <lockAfterExpiration>0</lockAfterExpiration>
            <minPasswordAge>0</minPasswordAge>
            <passwordHistoryLength>0</passwordHistoryLength>
        </lifetime>
        <stringPolicy>
            <description>Testing string policy</description>
            <limitations>
                <minLength>5</minLength>
                <!-- 			<maxLength>8</maxLength> -->
                <minUniqueChars>3</minUniqueChars>
                <checkAgainstDictionary>true</checkAgainstDictionary>
                <checkPattern />
                <!-- 			<limit> -->
                <!-- 				<description>Alphas</description> -->
                <!-- 				<minOccurs>1</minOccurs> -->
                <!-- 				<maxOccurs>5</maxOccurs> -->
                <!-- 				<mustBeFirst>false</mustBeFirst> -->
                <!-- 				<characterClass> -->
                <!-- 					<value>abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ</value> -->
                <!-- 				</characterClass> -->
                <!-- 			</limit> -->
                <!-- 			<limit> -->
                <!-- 				<description>Numbers</description> -->
                <!-- 				<minOccurs>1</minOccurs> -->
                <!-- 				<maxOccurs>5</maxOccurs> -->
                <!-- 				<mustBeFirst>false</mustBeFirst> -->
                <!-- 				<characterClass> -->
                <!-- 					<value>1234567890</value> -->
                <!-- 				</characterClass> -->
                <!-- 			</limit> -->
            </limitations>
        </stringPolicy>
    </object>

    <systemConfiguration oid="00000000-0000-0000-0000-000000000001" version="0"
                         xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-2a"
                         xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-2a"
                         xmlns:t="http://prism.evolveum.com/xml/ns/public/types-2">
        <name>SystemConfiguration</name>
<!--         <globalAccountSynchronizationSettings> -->
<!--         <assignmentPolicyEnforcement>relative</assignmentPolicyEnforcement> -->
<!--         </globalAccountSynchronizationSettings> -->
        <globalPasswordPolicyRef oid="00000000-0000-0000-0000-000000000003" type="c:ValuePolicyType"/>
        <logging>
            <classLogger>
                <!-- disabled because of MID-744, helper insert messages on ERROR
                level which should not be there (probably should be on TRACE) -->
                <level>OFF</level>
                <package>org.hibernate.engine.jdbc.spi.SqlExceptionHelper</package>
            </classLogger>
            <classLogger>
                <!-- disabled because we don't need to see every property file
                loading message (unnecessary log pollution) -->
                <level>WARN</level>
                <package>org.apache.wicket.resource.PropertiesFactory</package>
            </classLogger>
            <appender xsi:type="c:FileAppenderConfigurationType" name="IDM_LOG"
                      xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">
                <pattern>%date [%X{subsystem}] [%thread] %level \(%logger\): %msg%n</pattern>
                <fileName>${catalina.base}/logs/idm.log</fileName>
                <filePattern>${catalina.base}/logs/idm-%d{yyyy-MM-dd}.%i.log</filePattern>
                <maxHistory>10</maxHistory>
                <maxFileSize>100MB</maxFileSize>
                <append>true</append>
            </appender>
            <rootLoggerAppender>IDM_LOG</rootLoggerAppender>
            <rootLoggerLevel>INFO</rootLoggerLevel>
        </logging>
        <cleanupPolicy>
            <auditRecords>
                <maxAge>P3M</maxAge>
            </auditRecords>
            <closedTasks>
                <maxAge>P1M</maxAge>
            </closedTasks>
        </cleanupPolicy>
    </systemConfiguration>

    <role oid="00000000-0000-0000-0000-000000000004"
          xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-2a"
          xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-2a"
          xmlns:t="http://prism.evolveum.com/xml/ns/public/types-2">
        <name>Superuser</name>
        <authorization>
            <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-2#all</action>
        </authorization>
    </role>
    
    <role oid="00000000-0000-0000-0000-000000000008"
          xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-2a"
          xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-2a"
          xmlns:t="http://prism.evolveum.com/xml/ns/public/types-2">
        <name>End user</name>
        <authorization>
            <action>http://midpoint.evolveum.com/xml/ns/public/security/authorization-2#dashboard</action>
        </authorization>
    </role>

    <c:user oid="00000000-0000-0000-0000-000000000002"
            xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-2a"
            xmlns:t="http://prism.evolveum.com/xml/ns/public/types-2">
        <c:name>
            <t:orig>administrator</t:orig>
            <t:norm>administrator</t:norm>
        </c:name>
        <c:fullName>
            <t:orig>midPoint Administrator</t:orig>
            <t:norm>midpoint administrator</t:norm>
        </c:fullName>
        <c:givenName>
            <t:orig>midPoint</t:orig>
            <t:norm>midpoint</t:norm>
        </c:givenName>
        <c:familyName>
            <t:orig>Administrator</t:orig>
            <t:norm>administrator</t:norm>
        </c:familyName>
        <c:assignment>
			<c:targetRef oid="00000000-0000-0000-0000-000000000004" type="c:RoleType"/>
		</c:assignment>
        <c:activation>
            <c:administrativeStatus>enabled</c:administrativeStatus>
        </c:activation>
        <c:credentials xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-2a">
            <c:password>
                <c:value xmlns:enc="http://www.w3.org/2001/04/xmlenc#"
                         xmlns:ds="http://www.w3.org/2000/09/xmldsig#">
                    <enc:EncryptedData Type="http://www.w3.org/2001/04/xmlenc#Element">
                        <enc:EncryptionMethod Algorithm="http://www.w3.org/2001/04/xmlenc#aes128-cbc"/>
                        <ds:KeyInfo>
                            <ds:KeyName>4HXeUejV93Vd3JuIZz7sbs5bVko=</ds:KeyName>
                        </ds:KeyInfo>
                        <enc:CipherData>
                            <enc:CipherValue>R8JV6Bsf6Hjh1yodavjZ0cPshnGyHdspmANJmCQe2zXo7brYj1I/Bs5LGTZNI4k8</enc:CipherValue>
                        </enc:CipherData>
                    </enc:EncryptedData>
                </c:value>
            </c:password>
            <c:allowedIdmAdminGuiAccess>true</c:allowedIdmAdminGuiAccess>
        </c:credentials>
    </c:user>

    <task oid="00000000-0000-0000-0000-000000000005"
          xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-2a"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xmlns:xsd="http://www.w3.org/2001/XMLSchema">

        <name>Cleanup</name>
        <description>A system task that repeatedly checks for outdated objects (e.g. closed tasks, old audit records) and removes them.</description>
        <ownerRef oid="00000000-0000-0000-0000-000000000002"/>
        <executionStatus>runnable</executionStatus>

        <category>System</category>
        <handlerUri>http://midpoint.evolveum.com/model/cleanup-handler-1</handlerUri>
        <recurrence>recurring</recurrence>
        <binding>loose</binding>
        <schedule>
            <interval>86400</interval>
        </schedule>
    </task>

    <task oid="00000000-0000-0000-0000-000000000006"
          xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-2a"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xmlns:xsd="http://www.w3.org/2001/XMLSchema">

        <name>Validity Scanner</name>
        <description>A system task that maintains effective status of objects, based on their validity time constraints.</description>
        <ownerRef oid="00000000-0000-0000-0000-000000000002"/>
        <executionStatus>runnable</executionStatus>

        <category>System</category>
        <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/synchronization/task/focus-validation-scanner/handler-2</handlerUri>
        <recurrence>recurring</recurrence>
        <binding>loose</binding>
        <schedule>
            <interval>900</interval>
        </schedule>
    </task>
    
    <task oid="00000000-0000-0000-0000-000000000007"
          xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-2a"
          xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
          xmlns:xsd="http://www.w3.org/2001/XMLSchema">

        <name>Trigger Scanner</name>
        <description>A system task that executes triggers attached to objects.</description>
        <ownerRef oid="00000000-0000-0000-0000-000000000002"/>
        <executionStatus>runnable</executionStatus>

        <category>System</category>
        <handlerUri>http://midpoint.evolveum.com/xml/ns/public/model/trigger/scanner/handler-2</handlerUri>
        <recurrence>recurring</recurrence>
        <binding>loose</binding>
        <schedule>
            <interval>300</interval>
        </schedule>
    </task>
</c:objects>