<!--
  ~ Copyright (c) 2010-2014 Evolveum
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->
<report xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
        xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
        xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3"
        xmlns:xsd="http://www.w3.org/2001/XMLSchema"
		oid="00000000-0000-0000-0000-000000000107"
        version="0">
	<name>User accounts subreport</name>
	<description>User accounts subreport for midpoint users.</description>
	<!-- flag if this report is "parent" report, used for gui -->
	<parent>false</parent>
	<template>UEdwaGMzQmxjbEpsY0c5eWRDQU5DaUFnSUNBSkNYaHRiRzV6UFNKb2RIUndPaTh2YW1GemNHVnljbVZ3YjNKMGN5NXpiM1Z5WTJWbWIzSm5aUzV1WlhRdmFtRnpjR1Z5Y21Wd2IzSjBjeUlnRFFvSkNRbDRiV3h1Y3pwNGMyazlJbWgwZEhBNkx5OTNkM2N1ZHpNdWIzSm5Mekl3TURFdldFMU1VMk5vWlcxaExXbHVjM1JoYm1ObElpQU5DZ2tKQ1hoemFUcHpZMmhsYldGTWIyTmhkR2x2YmowaWFIUjBjRG92TDJwaGMzQmxjbkpsY0c5eWRITXVjMjkxY21ObFptOXlaMlV1Ym1WMEwycGhjM0JsY25KbGNHOXlkSE1nYUhSMGNEb3ZMMnBoYzNCbGNuSmxjRzl5ZEhNdWMyOTFjbU5sWm05eVoyVXVibVYwTDNoelpDOXFZWE53WlhKeVpYQnZjblF1ZUhOa0lpQU5DZ2tKQ1c1aGJXVTlJbkpsY0c5eWRGVnpaWEpCWTJOdmRXNTBjeUlnRFFvSkNRbGpiMngxYlc1RGIzVnVkRDBpTWlJZ0RRb0pDUWx3WVdkbFYybGtkR2c5SWpFNE1DSWdEUW9KQ1Fsd1lXZGxTR1ZwWjJoMFBTSXhPQ0lnRFFvSkNRbDNhR1Z1VG05RVlYUmhWSGx3WlQwaVFXeHNVMlZqZEdsdmJuTk9iMFJsZEdGcGJDSWdEUW9KQ1FsamIyeDFiVzVYYVdSMGFEMGlPRGtpSUEwS0NRa0pZMjlzZFcxdVUzQmhZMmx1WnowaU1TSWdEUW9KQ1Fsc1pXWjBUV0Z5WjJsdVBTSXdJaUFOQ2drSkNYSnBaMmgwVFdGeVoybHVQU0l3SWlBTkNna0pDWFJ2Y0UxaGNtZHBiajBpTUNJZ0RRb0pDUWxpYjNSMGIyMU5ZWEpuYVc0OUlqQWlJQTBLQ1FrSmRYVnBaRDBpTmpkbE5EWTFZelV0TkRabFlTMDBNR1F5TFdKbFlUQXRORFk1WXpaalpqTTRPVE0zSWo0TkNna0pDVHh3Y205d1pYSjBlU0J1WVcxbFBTSnVaWFF1YzJZdWFtRnpjR1Z5Y21Wd2IzSjBjeTVoZDNRdWFXZHViM0psTG0xcGMzTnBibWN1Wm05dWRDSWdkbUZzZFdVOUluUnlkV1VpTHo0TkNna0pDVHh3Y205d1pYSjBlU0J1WVcxbFBTSnVaWFF1YzJZdWFtRnpjR1Z5Y21Wd2IzSjBjeTVsZUhCdmNuUXVjR1JtTG1admNtTmxMbXhwYm1WaWNtVmhheTV3YjJ4cFkza2lJSFpoYkhWbFBTSjBjblZsSWk4K0RRb0pDUWs4YVcxd2IzSjBJSFpoYkhWbFBTSmpiMjB1WlhadmJIWmxkVzB1Yldsa2NHOXBiblF1Y21Wd2IzSjBMbWx0Y0d3dVVtVndiM0owVlhScGJITWlMejROQ2lBZ0lDQWdJQ0FnSUNBZ0lEeHpkSGxzWlNCbWIyNTBUbUZ0WlQwaVJHVnFZVloxSUZOaGJuTWlJR1p2Ym5SVGFYcGxQU0kySWlCb1FXeHBaMjQ5SWt4bFpuUWlJR2x6UkdWbVlYVnNkRDBpZEhKMVpTSWdhWE5RWkdaRmJXSmxaR1JsWkQwaWRISjFaU0lnRFFvSkNRa0pJQ0FnYm1GdFpUMGlRbUZ6WlNJZ2NHUm1SVzVqYjJScGJtYzlJa2xrWlc1MGFYUjVMVWdpSUhCa1prWnZiblJPWVcxbFBTSkVaV3BoVm5WVFlXNXpMblIwWmlJZ2RrRnNhV2R1UFNKTmFXUmtiR1VpUGcwS0NRa0pQQzl6ZEhsc1pUNE5DZ2tKQ1R4emRIbHNaU0JwYzBKdmJHUTlJbVpoYkhObElpQnBjMFJsWm1GMWJIUTlJbVpoYkhObElpQnVZVzFsUFNKRVpYUmhhV3dpSUhOMGVXeGxQU0pDWVhObElpOCtEUW9nSUNBZ0lDQWdJQ0FnSUFrOGNHRnlZVzFsZEdWeUlHNWhiV1U5SW14cGJtdFNaV1lpSUdOc1lYTnpQU0pxWVhaaExuVjBhV3d1UVhKeVlYbE1hWE4wSWk4K0RRb0pDUWs4Y0dGeVlXMWxkR1Z5SUc1aGJXVTlJbWh4YkZGMVpYSjVRV05qYjNWdWRITWlJR05zWVhOelBTSnFZWFpoTG14aGJtY3VVM1J5YVc1bklpOCtEUW9nSUNBZ0lDQWdJQ0FnSUNBTkNna0pDVHh4ZFdWeWVWTjBjbWx1WnlCc1lXNW5kV0ZuWlQwaWJYRnNJajQ4SVZ0RFJFRlVRVnNOQ2drSkNUeG1hV3gwWlhJK0RRb2dJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ1BIUjVjR1UrRFFvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lEeDBlWEJsUGxOb1lXUnZkMVI1Y0dVOEwzUjVjR1UrRFFvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lEeG1hV3gwWlhJK0RRb2dJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJRHhwYms5cFpENE5DaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lEeGxlSEJ5WlhOemFXOXVQZzBLSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUR4elkzSnBjSFErRFFvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ1BISmxkSFZ5YmxSNWNHVStiR2x6ZER3dmNtVjBkWEp1Vkhsd1pUNE5DaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ1BHTnZaR1UrRFFvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNCcGJYQnZjblFnYW1GMllTNTFkR2xzTGt4cGMzUTdEUW9nSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0JwYlhCdmNuUWdhbUYyWVM1MWRHbHNMa0Z5Y21GNVRHbHpkRHNOQ2lBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUdsdGNHOXlkQ0JqYjIwdVpYWnZiSFpsZFcwdWJXbGtjRzlwYm5RdWVHMXNMbTV6TGw5d2RXSnNhV011WTI5dGJXOXVMbU52YlcxdmJsOHpMazlpYW1WamRGSmxabVZ5Wlc1alpWUjVjR1U3RFFvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNCTWFYTjBJRzlwWkhNZ1BTQnVaWGNnUVhKeVlYbE1hWE4wS0NrN0RRb2dJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQm1iM0lnS0U5aWFtVmpkRkpsWm1WeVpXNWpaVlI1Y0dVZ2IzSjBJRG9nYkdsdWExSmxaaWw3RFFvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdiMmxrY3k1aFpHUW9iM0owTG1kbGRFOXBaQ2dwS1RzTkNpQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lIME5DaUFnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJSEpsZEhWeWJpQnZhV1J6T3cwS0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0E4TDJOdlpHVStEUW9nSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnUEM5elkzSnBjSFErRFFvZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0E4TDJWNGNISmxjM05wYjI0K0RRb2dJQ0FnSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJRHd2YVc1UGFXUStEUW9nSUNBZ0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUR3dlptbHNkR1Z5UGcwS0lDQWdJQ0FnSUNBZ0lDQWdJQ0FnSUR3dmRIbHdaVDROQ2lBZ0lDQWdJQ0FnSUNBZ0lEd3ZabWxzZEdWeVBnMEtDUWtKWFYwK1BDOXhkV1Z5ZVZOMGNtbHVaejROQ2drSkNUeG1hV1ZzWkNCdVlXMWxQU0p1WVcxbElpQmpiR0Z6Y3owaVkyOXRMbVYyYjJ4MlpYVnRMbTFwWkhCdmFXNTBMbkJ5YVhOdExuQnZiSGx6ZEhKcGJtY3VVRzlzZVZOMGNtbHVaeUl2UGcwS0NRa0pQR1pwWld4a0lHNWhiV1U5SW5KbGMyOTFjbU5sVW1WbUlpQmpiR0Z6Y3owaVkyOXRMbVYyYjJ4MlpYVnRMbTFwWkhCdmFXNTBMbmh0YkM1dWN5NWZjSFZpYkdsakxtTnZiVzF2Ymk1amIyMXRiMjVmTXk1UFltcGxZM1JTWldabGNtVnVZMlZVZVhCbElpOCtEUW9KQ1FrTkNna0pDVHhrWlhSaGFXdytEUW9KQ1FrSlBHSmhibVFnYUdWcFoyaDBQU0l4T0NJZ2MzQnNhWFJVZVhCbFBTSlRkSEpsZEdOb0lqNE5DZ2tKQ1FrSlBHWnlZVzFsUGcwS0NRa0pDUWs4Y21Wd2IzSjBSV3hsYldWdWRDQjFkV2xrUFNJelpUaG1aR1EyWkMxaE5tWm1MVFEwTURjdE9XRXhaUzAxWkRaaU5EY3dOak13TUdFaUlIQnZjMmwwYVc5dVZIbHdaVDBpUm14dllYUWlJSE4wZVd4bFBTSkVaWFJoYVd3aUlHMXZaR1U5SWs5d1lYRjFaU0lnZUQwaU1DSWdlVDBpTVNJZ2QybGtkR2c5SWpFNE1DSWdhR1ZwWjJoMFBTSXhOeUl2UGcwS0lDQWdJQWtKQ1FrSlBHeHBibVUrRFFvSkNRa0pDUWtKUEhKbGNHOXlkRVZzWlcxbGJuUWdkWFZwWkQwaU5EZG1PVEU0TURFdFkyWTFaaTAwWW1Wa0xXSXhPV010WTJFek9UTXhZMkptT1Roa0lpQndiM05wZEdsdmJsUjVjR1U5SWtacGVGSmxiR0YwYVhabFZHOVViM0FpSUhnOUlqQWlJSGs5SWpBaUlIZHBaSFJvUFNJeE9EQWlJR2hsYVdkb2REMGlNU0lnWm05eVpXTnZiRzl5UFNJak16TXpNek16SWo0TkNna0pDUWtKQ1FrSlBIQnlhVzUwVjJobGJrVjRjSEpsYzNOcGIyNCtQQ0ZiUTBSQlZFRmJibVYzSUdwaGRtRXViR0Z1Wnk1Q2IyOXNaV0Z1S0NocGJuUXBKRlo3VWtWUVQxSlVYME5QVlU1VWZTNXBiblJXWVd4MVpTZ3BJVDB4S1YxZFBqd3ZjSEpwYm5SWGFHVnVSWGh3Y21WemMybHZiajROQ2drSkNRa0pDUWs4TDNKbGNHOXlkRVZzWlcxbGJuUStEUW9KQ1FrSkNRa0pQR2R5WVhCb2FXTkZiR1Z0Wlc1MFBnMEtDUWtKQ1FrSkNRazhjR1Z1SUd4cGJtVlhhV1IwYUQwaU1DNDFJaUJzYVc1bFEyOXNiM0k5SWlNNU9UazVPVGtpTHo0TkNna0pDUWtKQ1FrOEwyZHlZWEJvYVdORmJHVnRaVzUwUGcwS0NRa0pDUWtKUEM5c2FXNWxQZzBLQ1FrSkNRa0pQSFJsZUhSR2FXVnNaQ0JwYzFOMGNtVjBZMmhYYVhSb1QzWmxjbVpzYjNjOUluUnlkV1VpUGcwS0NRa0pDUWtKQ1R4eVpYQnZjblJGYkdWdFpXNTBJSFYxYVdROUltVmlZV1ZtTVRaa0xUSTVNRE10TkRBeU9TMDVZVFppTFdRMFpESTBORFUxT0dGbE9TSWdjRzl6YVhScGIyNVVlWEJsUFNKR2JHOWhkQ0lnYzNSeVpYUmphRlI1Y0dVOUlsSmxiR0YwYVhabFZHOVVZV3hzWlhOMFQySnFaV04wSWlCemRIbHNaVDBpUkdWMFlXbHNJaUI0UFNJd0lpQjVQU0l5SWlCM2FXUjBhRDBpTVRnd0lpQm9aV2xuYUhROUlqRXpJaTgrRFFvSkNRa0pDUWtKUEhSbGVIUkZiR1Z0Wlc1MElIWmxjblJwWTJGc1FXeHBaMjV0Wlc1MFBTSk5hV1JrYkdVaUx6NGdEUW9KQ1FrSkNRa0pQSFJsZUhSR2FXVnNaRVY0Y0hKbGMzTnBiMjQrUENGYlEwUkJWRUZiSUZKbGNHOXlkRlYwYVd4ekxuSmxjMjlzZG1WU1pXWk9ZVzFsS0NSR2UzSmxjMjkxY21ObFVtVm1mU2tnSUNzZ0lqb2dJaUFySkVaN2JtRnRaWDB1WjJWMFQzSnBaeWdwWFYwK1BDOTBaWGgwUm1sbGJHUkZlSEJ5WlhOemFXOXVQZzBLQ1FrSkNRa0pQQzkwWlhoMFJtbGxiR1ErRFFvSkNRa0pDUWtOQ2drSkNRa0pQQzltY21GdFpUNE5DZ2tKQ1FrOEwySmhibVErRFFvSkNRazhMMlJsZEdGcGJENE5DZ2tKUEM5cVlYTndaWEpT</template>
	<orientation>landscape</orientation>
	<export>pdf</export>
	<!-- set to true if report needs hibernate session (e.g. hql query is used) -->
	<useHibernateSession>true</useHibernateSession>
	<field>
		<nameReport>accountName</nameReport>
		<nameHeader>Name</nameHeader>
		<itemPath>c:name</itemPath>
		<width>100</width>
		<classType>t:PolyStringType</classType>
	</field>
	<!-- configuration properties -->
	<configuration xmlns:r="http://midpoint.evolveum.com/xml/ns/public/report">
		<r:hqlQueryAccounts>
			select r.name.orig as resourceName, 
			s.name.orig as accountName 
			from RObjectReference as o, 
			RShadow as s, 
			RResource as r 
			where s.resourceRef.targetOid = r.oid and o.owner.oid = $P{userOid} and o.type = 6 and o.targetOid = s.oid and s.kind = 0 
			order by r.name.orig, s.name.orig
		</r:hqlQueryAccounts>
	</configuration>			
	<!-- report parameters configuration schema sample with different options -->
	<configurationSchema>
		<definition>
			<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                    xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3"
                    xmlns:a="http://prism.evolveum.com/xml/ns/public/annotation-3"
                    xmlns:r="http://midpoint.evolveum.com/xml/ns/public/report"
                    elementFormDefault="qualified"
                    targetNamespace="http://midpoint.evolveum.com/xml/ns/public/report">

				<xsd:import namespace="http://midpoint.evolveum.com/xml/ns/public/common/common-3"/>
				<xsd:import namespace="http://prism.evolveum.com/xml/ns/public/annotation-3"/>
				<xsd:import namespace="http://prism.evolveum.com/xml/ns/public/query-3"/>

				<xsd:complexType name="ConfigurationType">
					<xsd:annotation>
						<xsd:appinfo>
							<a:container/>
						</xsd:appinfo>
					</xsd:annotation>
					<xsd:sequence>
						<!-- HQL query for jasper design (queryString element) -->
						<xsd:element name="hqlQueryAccounts" type="xsd:string"/>
					</xsd:sequence>
				</xsd:complexType>
				<xsd:element name="configuration" type="r:ConfigurationType"/>
			</xsd:schema>
		</definition>
	</configurationSchema>
</report>