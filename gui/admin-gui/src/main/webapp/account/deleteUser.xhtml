<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<ui:composition template="/resources/templates/admin-template.xhtml" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core" xmlns:ice="http://www.icesoft.com/icefaces/component"
	xmlns:prefs="http://java.sun.com/jsf/composite/components/preferences"
	xmlns:user="http://java.sun.com/jsf/composite/components/user"
	xmlns:idm="http://midpoint.evolveum.com/xml/ns/custom-taglib/">

	<ui:define name="title">#{lang.messages['user.type.delete.title']}</ui:define>
	<ui:define name="content-title">#{lang.messages['user.type.delete.title']}</ui:define>

	<ui:define name="admin-content">
		<ice:form id="admin-content">
			<ice:panelPopup modal="true" autoCentre="true" visible="#{userList.showPopup}">
				<f:facet name="header">
					<ice:outputText value="Confirm delete" />
				</f:facet>
				<f:facet name="body">
					<ice:outputText value="Do you really want to delete selected users?" />
					<br />
					<ice:commandButton value="Yes" action="#{userList.deleteUsers}" />
					<ice:commandButton value="No" action="#{userList.hideConfirmDelete}" />
				</f:facet>
			</ice:panelPopup>
			<ice:panelGrid>
				<ice:panelGroup styleClass="buttonsPosition">
					<ice:panelGrid columns="3" styleClass="searchOidPosition">
						<ice:outputText value="#{msg['user.type.userID']}" />
						<ice:inputText value="#{userList.searchOid}" immediate="true" />
						<idm:button actionListener="#{userList.searchUser}" value="#{msg['user.type.search.button']}"
							id="searchButton" img="/resources/images/magnifier.png" />
					</ice:panelGrid>
				</ice:panelGroup>

				<ice:commandButton id="deleteAllUsers" type="submit" value="#{msg['user.type.deleteAll.button']}"
					action="#{userList.selectAll}" />
				<ice:dataTable id="userTable" rows="10" value="#{userList.userData}" var="user"
					sortColumn="#{userList.userList.sortColumnName}" sortAscending="#{userList.userList.ascending}"
					columnClasses="iceDatTblCol1" rowClasses="iceDatTblRow1 iceDatTblRow2"
					columnWidths="auto, 230px, 100px, 100px, 170px, 100px, 100px, 150px">
					<ice:column>
						<ice:selectBooleanCheckbox id="deleteCheckbox" value="#{user.selected}" />
					</ice:column>
					<ice:column>
						<f:facet name="header">
							<ice:outputText id="userOid" value="#{msg['user.type.oid']}" />
						</f:facet>
						<ice:outputText id="oid" value="#{user.oid}" />
					</ice:column>
					<ice:column>
						<f:facet name="header">
							<ice:outputText id="userGivenName" value="#{msg['user.type.givenName']}" />
						</f:facet>
						<ice:outputText id="givenName" value="#{user.givenName}" />
					</ice:column>
					<ice:column>
						<f:facet name="header">
							<ice:outputText id="userFamilyName" value="#{msg['user.type.familyName']}" />
						</f:facet>
						<ice:outputText id="familyName" value="#{user.familyName}" />
					</ice:column>
					<ice:column>
						<f:facet name="header">
							<ice:outputText id="userFullName" value="#{msg['user.type.fullName']}" />
						</f:facet>
						<ice:outputText id="fullName" value="#{user.fullName}" />
					</ice:column>
					<ice:column>
						<f:facet name="header">
							<ice:outputText id="userName" value="#{msg['user.type.name']}" />
						</f:facet>
						<ice:outputText id="name" value="#{user.name}" />
					</ice:column>
					<ice:column>
						<f:facet name="header">
							<ice:commandSortHeader columnName="telNumber" arrow="true" actionListener="#{userList.sortItem}">
								<ice:outputText id="userTelNumber" value="#{msg['user.type.telNumber']}" />
							</ice:commandSortHeader>
						</f:facet>
						<ice:outputText id="telNumber" />
					</ice:column>
					<ice:column>
						<f:facet name="header">
							<ice:commandSortHeader columnName="email" arrow="true" actionListener="#{userList.sortItem}">
								<ice:outputText id="userEmail" value="#{msg['user.type.email']}" />
							</ice:commandSortHeader>
						</f:facet>
						<ice:outputText id="email" />
					</ice:column>
				</ice:dataTable>
				<ice:panelGroup>
					<ice:dataPaginator for="userTable" paginator="true" style="margin: auto;">
						<f:facet name="first">
							<ice:graphicImage url="resources/images/resultset_first.png" />
						</f:facet>
						<f:facet name="last">
							<ice:graphicImage url="resources/images/resultset_last.png" />
						</f:facet>
						<f:facet name="previous">
							<ice:graphicImage url="resources/images/resultset_previous.png" />
						</f:facet>
						<f:facet name="next">
							<ice:graphicImage url="resources/images/resultset_next.png" />
						</f:facet>
					</ice:dataPaginator>
				</ice:panelGroup>
				<ice:panelGroup style="display:block; ">
					<idm:button action="#{userList.showConfirmDelete}" id="deleteUser" buttonType="negative"
						value="#{lang.messages['user.type.delete.button']}" img="/resources/images/user_delete.png" />
				</ice:panelGroup>
			</ice:panelGrid>
		</ice:form>
	</ui:define>

</ui:composition>