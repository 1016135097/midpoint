<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition template="/resources/templates/template.xhtml" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:comp="http://java.sun.com/jsf/composite/components" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ice="http://www.icesoft.com/icefaces/component"
	xmlns:idm="http://midpoint.evolveum.com/xml/ns/custom-taglib/">

	<ui:define name="title">#{lang.messages['page.resource.index.title']}</ui:define>

	<ui:define name="menu">
		<ui:include src="./menu.xhtml" />
	</ui:define>

	<ui:define name="content">
		Resource stuff :)))
		<ice:form>
			<ice:dataTable id="resourceTable" rows="50" value="#{resourceList.resourceList}" var="item"
				sortColumn="#{resourceList.sortColumnName}" sortAscending="#{resourceList.ascending}"
				columnClasses="iceDatTblCol1" rowClasses="iceDatTblRow1 iceDatTblRow2"
				columnWidths="auto, 220px, 240px, 120px, 30px, 30px, 225px" resizable="false">
				<ice:column>
					<f:facet name="header">
						<ice:selectBooleanCheckbox id="selectAllCheckbox" value="#{resourceList.selectAll}"
							valueChangeListener="#{resourceList.selectAllPerformed}" immediate="true" partialSubmit="true" />
					</f:facet>
					<ice:selectBooleanCheckbox id="selectCheckbox" value="#{item.selected}" partialSubmit="true"
						immediate="true" valueChangeListener="#{resourceList.selectPerformed}" />
				</ice:column>
				<ice:column>
					<f:facet name="header">
						<ice:commandSortHeader columnName="name" arrow="true" actionListener="#{resourceList.sortList}">
							<ice:outputText id="nameTxt" value="Name" />
						</ice:commandSortHeader>
					</f:facet>
					<ice:outputText>
						<ice:commandLink styleClass="iceOutTxt" style="text-decoration: underline;" id="name"
							value="#{item.name}" action="#{resourceList.showResourceDetails}">
							<f:param name="resourceOid" value="#{item.oid}" />
						</ice:commandLink>
					</ice:outputText>
				</ice:column>
				<ice:column>
					<f:facet name="header">
						<ice:commandSortHeader columnName="type" arrow="true" actionListener="#{resourceList.sortList}">
							<ice:outputText id="bundleTxt" value="Bundle" />
						</ice:commandSortHeader>
					</f:facet>
					<ice:outputText value="#{item.type}" />
				</ice:column>
				<ice:column>
					<f:facet name="header">
						<ice:commandSortHeader columnName="version" arrow="true" actionListener="#{resourceList.sortList}">
							<ice:outputText id="versionTxt" value="Version" />
						</ice:commandSortHeader>
					</f:facet>
					<ice:outputText value="#{item.version}" />
				</ice:column>
				<ice:column>
					<f:facet name="header">
						<ice:commandSortHeader columnName="state" arrow="true" actionListener="#{resourceList.sortList}">
							<ice:outputText id="statusTxt" value="Status" />
						</ice:commandSortHeader>
					</f:facet>
					<ice:commandLink actionListener="#{resourceList.testConnection}" immediate="true"
						style="display: block; width: 100%; text-align: center;">
						<f:param name="resourceOid" value="#{item.oid}" />
						<ice:graphicImage value="/resources/images/#{item.overallStatus.icon}" alt="#{item.overallStatus.title}" />
					</ice:commandLink>
				</ice:column>
				<ice:column>
					<f:facet name="header">
						<ice:commandSortHeader columnName="sync" arrow="true" actionListener="#{resourceList.sortList}">
							<ice:outputText id="syncTxt" value="Sync" />
						</ice:commandSortHeader>
					</f:facet>
					<ice:commandLink  immediate="true" action="/resource/sync?faces-redirect=true"
						style="display: block; width: 100%; text-align: center;">
						<f:param name="resourceOid" value="#{item.oid}" />
						<ice:graphicImage value="/resources/images/#{item.sync.syncImage}" alt="#{item.sync.syncTitle}" />
					</ice:commandLink>
				</ice:column>
				<ice:column>
					<f:facet name="header">
						<ice:outputText id="progressTxt" value="Progress" />
						<!-- progress bar -->
					</f:facet>
				</ice:column>
			</ice:dataTable>

			<div class="button-bar">
				<ui:remove>
					<idm:button value="Disable" img="/resources/images/drive_burn.png" id="disableResource" immediate="true" />
				</ui:remove>

				<idm:button id="deleteResource" buttonType="negative" value="Delete"
					img="/resources/images/drive_delete.png" />
			</div>
		</ice:form>
	</ui:define>
</ui:composition>