<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition template="/resources/templates/template.xhtml" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:comp="http://java.sun.com/jsf/composite/components" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ice="http://www.icesoft.com/icefaces/component"
	xmlns:idm="http://midpoint.evolveum.com/xml/ns/custom-taglib/">

	<ui:define name="title">Details for resource '#{resourceDetails.resource.name}'</ui:define>

	<ui:define name="menu">
		<ui:include src="./menu.xhtml" />
	</ui:define>

	<ui:define name="content">
		<ice:form>
			<ice:panelGrid columns="2" style="width: 100%;">
				<ice:panelGroup>
					<ice:panelGrid columns="2" cellpadding="7" cellspacing="7">
						<f:facet name="header">
							<h3>Resource</h3>
						</f:facet>
						<ice:outputLabel value="Oid" />
						<ice:outputText value="#{resourceDetails.resource.oid}" />

						<ice:outputLabel value="Name" />
						<ice:outputText value="#{resourceDetails.resource.name}" />

						<ice:outputLabel value="Type" />
						<ice:outputText value="#{resourceDetails.resource.type}" />

						<ice:outputLabel value="Version" />
						<ice:outputText value="#{resourceDetails.resource.version}" />
					</ice:panelGrid>
					<ice:commandLink style="margin-top: 40px; display: block; text-decoration: underline;"
						value="See debug pages" />
				</ice:panelGroup>

				<ice:panelGrid columns="2" cellpadding="7" cellspacing="7">
					<f:facet name="header">
						<h3>Connector Details</h3>
					</f:facet>
					<ice:outputLabel value="Overall status" />
					<ice:graphicImage value="/resources/images/#{resourceDetails.resource.overallStatus.icon}"
						alt="#{resourceDetails.resource.overallStatus.title}" />

					<ice:outputLabel value="Configuration validation" />
					<ice:graphicImage value="/resources/images/#{resourceDetails.resource.state.confValidation.icon}"
						alt="#{resourceDetails.resource.state.confValidation.title}" />

					<ice:outputLabel value="Connection initialization" />
					<ice:graphicImage value="/resources/images/#{resourceDetails.resource.state.conInitialization.icon}"
						alt="#{resourceDetails.resource.state.conInitialization.title}" />

					<ice:outputLabel value="Connector connection" />
					<ice:graphicImage value="/resources/images/#{resourceDetails.resource.state.conConnection.icon}"
						alt="#{resourceDetails.resource.state.conConnection.title}" />

					<ice:outputLabel value="Connector sanity" />
					<ice:graphicImage value="/resources/images/#{resourceDetails.resource.state.conSanity.icon}"
						alt="#{resourceDetails.resource.state.conSanity.title}" />

					<ice:outputLabel value="Connector schema" />
					<ice:graphicImage value="/resources/images/#{resourceDetails.resource.state.conSchema.icon}"
						alt="#{resourceDetails.resource.state.conSchema.title}" />

					<ice:outputLabel value="Extra test (#{resourceDetails.resource.state.extraName})" />
					<ice:graphicImage value="/resources/images/#{resourceDetails.resource.state.extra.icon}"
						alt="#{resourceDetails.resource.state.extra.title}" />
				</ice:panelGrid>
			</ice:panelGrid>

			<h3>Object Types</h3>
			<div>***Here goes table with data types of resource***</div>
			<div>***Unused buttons will be removed later***</div>

			<ice:panelGrid columns="2" cellpadding="7" cellspacing="7">
				<f:facet name="header">
					<h3>Import Status</h3>
				</f:facet>

				<ice:outputText value="Running" />
				<ice:outputText value="#{resourceTypeController.status.running}" />
				
				<ice:outputText value="Launch time" />
				<ice:outputText value="#{resourceTypeController.status.launchTime}" />

				<ice:outputText value="Finish time" />
				<ice:outputText value="#{resourceTypeController.status.finishTime}" />

				<ice:outputText value="Progress" />
				<ice:outputText value="#{resourceTypeController.status.progress}" />				

				<ice:outputText value="Last status" />
				<ice:outputText value="#{resourceTypeController.status.lastStatus}" />

				<ice:outputText value="Number of errors" />
				<ice:outputText value="#{resourceTypeController.status.numberOfErrors}" />

				<ice:outputText value="Last error" />
				<ice:panelGroup />

				<ice:outputText value="Message: " styleClass="importStatus" />
				<ice:outputText value="#{resourceTypeController.status.lastError.message}" />

				<ice:outputText value="Detail: " styleClass="importStatus" />
				<ice:outputText value="#{resourceTypeController.status.lastError.details}" />

				<ice:outputText value="Timestamp: " styleClass="importStatus" />
				<ice:outputText value="#{resourceTypeController.status.lastError.timestamp}" />
			</ice:panelGrid>

			<div class="button-bar">
				<idm:button action="#{resourceList.updateController}" value="#{lang.messages['Back']}"
					img="/resources/images/door_in.png" />
				<idm:button value="Disable" img="/resources/images/drive_burn.png" id="disableResource" immediate="true" />
				<idm:button id="deleteResource" buttonType="negative" value="Delete"
					img="/resources/images/drive_delete.png" />
				<idm:button action="#{resourceDetails.testConnection}" id="testConnectionButton" value="Test connection"
					img="/resources/images/connect.png" />
				<idm:button action="#{resourceDetails.importFromResource}" id="ImportFromResourceButton"
					value="Import accounts" img="/resources/images/drive_go.png" />

				not used

				<idm:button action="#{resourceTypeController.listAccounts}" id="listAccountsButton" value="List accounts"
					img="/resources/images/list.png" />

				<idm:button action="#{resourceTypeController.getImportStatus}" id="ImportStatusButton"
					value="Import status" img="/resources/images/cog.png" />
			</div>
		</ice:form>
	</ui:define>
</ui:composition>