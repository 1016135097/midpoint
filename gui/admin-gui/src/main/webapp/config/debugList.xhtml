<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition template="/resources/templates/template.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:comp="http://java.sun.com/jsf/composite/components"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ice="http://www.icesoft.com/icefaces/component"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:idm="http://midpoint.evolveum.com/xml/ns/custom-taglib/">

	<ui:define name="title">#{msg['page.config.debugList.title']}</ui:define>

	<ui:define name="menu">
		<ui:include src="./menu.xhtml" />
	</ui:define>

	<ui:define name="content">
		<ice:form id="debugListForm">
			<ice:panelPopup modal="true" autoCentre="true"
				visible="#{debugList.showPopup}">
				<f:facet name="header">
					<ice:outputText
						value="#{msg['page.config.debugList.confirm.title']}" />
				</f:facet>
				<f:facet name="body">
					<ice:outputText value="#{msg['page.config.debugList.confirm']}" />
					<div class="button-bar">
						<ice:commandButton id="yes"
							value="#{msg['page.config.debugList.confirm.yes']}"
							action="#{debugList.deleteObject}">
							<f:param name="objectOid" value="#{debugList.oidToDelete}" />
						</ice:commandButton>
						<ice:commandButton id="no"
							value="#{msg['page.config.debugList.confirm.no']}"
							action="#{debugList.hideConfirmDelete}" />
					</div>
				</f:facet>
			</ice:panelPopup>

			<ice:panelPopup modal="true" autoCentre="true"
				visible="#{debugList.showPopupForDeleteAllObjects}">
				<f:facet name="header">
					<ice:outputText
						value="#{msg['page.config.debugList.confirm.title']}" />
				</f:facet>
				<f:facet name="body">
					<ice:outputText value="#{msg['page.config.debugList.confirmAll']}" />
					<div class="button-bar">
						<ice:commandButton id="yesForAll"
							value="#{msg['page.config.debugList.confirm.yes']}"
							action="#{debugList.deleteAllObjects}">
						</ice:commandButton>
						<ice:commandButton id="noForAll"
							value="#{msg['page.config.debugList.confirm.no']}"
							action="#{debugList.hideConfirmDeleteForAllObjects}" />
					</div>
				</f:facet>
			</ice:panelPopup>

			<ice:selectOneMenu id="selectOneMenuList" styleClass="secondRow"
				value="#{debugList.objectType}" immediate="true"
				partialSubmit="true">
				<f:selectItems value="#{debugList.objectTypes}" />
			</ice:selectOneMenu>
			<idm:button id="listObjectsButton" style="margin-left: 10px;"
				value="#{msg['page.config.debugList.button.listObjects']}"
				action="#{debugList.list}" img="/resources/images/table.png"
				immediate="true" />

			<div style="width: 50px; display: inline-block;" />
			<ice:outputText value="Objects per page "
				rendered="#{debugList.showTable}" />
			<ice:inputText id="pageSize" value="#{debugList.rowsCount}" size="1"
				rendered="#{debugList.showTable}" />
			<idm:button value="#{msg['page.account.index.refresh']}"
				action="#{debugList.listFirst}" id="relistButton"
				rendered="#{debugList.showTable}"
				img="/resources/images/arrow_rotate_clockwise.png" />

			<div style="width: 15px; display: inline-block;" />
			<idm:button id="deleteAllObjectsButton"
				rendered="#{debugList.showTable}" value="Delete all objects"
				action="#{debugList.showConfirmDeleteForAllObjects}"
				img="/resources/images/delete.png" buttonType="negative">
			</idm:button>

			<ice:panelGrid columns="2" cellpadding="7" cellspacing="7"
				rendered="#{debugList.showTable}">
				<ice:outputText value="#{msg['page.config.debugList.objectName']}" />
				<ice:outputText />

				<c:forEach items="#{debugList.objects}" var="item"
					varStatus="status">
					<ice:commandLink value="#{item.name}" id="link#{status.index}"
						action="#{debugList.viewOrEdit}"
						style="text-decoration: underline;">
						<f:param name="viewObjectOid" value="#{item.oid}" />
					</ice:commandLink>

					<idm:button id="deleteButton#{status.index}"
						value="#{msg['page.config.debugList.button.delete']}"
						action="#{debugList.showConfirmDelete}"
						img="/resources/images/delete.png" buttonType="negative">
						<f:param name="deleteObjectOid" value="#{item.oid}" />
					</idm:button>
				</c:forEach>
			</ice:panelGrid>

			<comp:paging bean="#{debugList}" rendered="#{debugList.showTable}" />

		</ice:form>
	</ui:define>
</ui:composition>

