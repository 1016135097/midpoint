<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition template="/resources/templates/template.xhtml" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:comp="http://java.sun.com/jsf/composite/components" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ice="http://www.icesoft.com/icefaces/component" xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:idm="http://midpoint.evolveum.com/xml/ns/custom-taglib/">

	<ui:define name="title">Logging management</ui:define>

	<ui:define name="menu">
		<ui:include src="./menu.xhtml" />
	</ui:define>

	<ui:define name="content">
		<ice:form id="admin-content">
			<ice:panelGroup>
				<h3>#{trace.module.name}</h3>
				<ice:panelGrid columns="4" cellpadding="7" cellspacing="7">
					<ice:selectOneMenu value="#{trace.module.level}">
						<f:selectItems value="#{trace.logLevels}" />
					</ice:selectOneMenu>
					<ice:outputText value="Log pattern: " />
					<ice:inputText value="#{trace.module.logPattern}" size="40" />
				</ice:panelGrid>
				<ice:panelGrid columns="4" cellpadding="7" cellspacing="7">
					<c:forEach items="#{trace.module.items}" var="item" varStatus="status">
						<ice:inputText size="60" value="#{item.packageName}" />
						<ice:selectOneMenu value="#{item.level}">
							<f:selectItems value="#{trace.logLevels}" />
						</ice:selectOneMenu>

						<c:choose value="#{module.itemsSize}">
							<c:when test="#{module.itemsSize != 1}">
								<idm:button actionListener="#{trace.deleteTrace}" buttonType="negative" action="trace" value="Delete"
									img="/resources/images/table_delete.png">
									<f:param name="itemId" value="#{item.id}" />
								</idm:button>
							</c:when>
							<c:otherwise>
								<ice:outputText value="" />
							</c:otherwise>
						</c:choose>

						<c:choose value="#{status.last}">
							<c:when test="#{status.last == true}">
								<idm:button actionListener="#{trace.addTrace}" action="trace" buttonType="positive" value="Add"
									img="/resources/images/table_add.png" />
							</c:when>
							<c:otherwise>
								<ice:outputText value="" />
							</c:otherwise>
						</c:choose>
					</c:forEach>
				</ice:panelGrid>
			</ice:panelGroup>

			<div class="button-bar">
				<idm:button action="#{trace.refreshPerformed}" value="Refresh"
					img="/resources/images/arrow_rotate_clockwise.png" />
				<idm:button action="#{trace.savePerformed}" buttonType="positive" value="Save"
					img="/resources/images/save.png" />
			</div>
		</ice:form>
	</ui:define>
</ui:composition>