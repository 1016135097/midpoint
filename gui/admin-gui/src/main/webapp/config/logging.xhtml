<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition template="/resources/templates/template.xhtml" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:comp="http://java.sun.com/jsf/composite/components" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ice="http://www.icesoft.com/icefaces/component" xmlns:ace="http://www.icefaces.org/icefaces/components"
	xmlns:idm="http://midpoint.evolveum.com/xml/ns/custom-taglib/">

	<ui:define name="title">#{msg['page.config.logging.title']}</ui:define>

	<ui:define name="menu">
		<ui:include src="./menu.xhtml" />
	</ui:define>

	<ui:define name="content">
		<ice:form id="loggingForm">
			<h3>#{msg['page.config.logging.loggers']}</h3>
			<ice:dataTable rows="20" value="#{logging.loggers}" var="item"
				columnWidths="auto, 70px, 160px, 200px, 280px, 150px" resizable="false">
				<ice:column>
					<f:facet name="header">
						<ice:selectBooleanCheckbox id="selectAllCheckbox" value="#{logging.selectAllLoggers}"
							valueChangeListener="#{logging.selectAllLoggersPerformed}" immediate="true" partialSubmit="true" />
					</f:facet>
					<ice:selectBooleanCheckbox id="selectCheckbox" value="#{item.selected}" partialSubmit="true"
						immediate="true" valueChangeListener="#{logging.selectLoggerPerformed}" />
				</ice:column>
				<ice:column>
					<f:facet name="header">
						<ice:outputLabel value="#{msg['page.config.logging.table.log.level']}" />
					</f:facet>
					<ice:commandLink style="text-decoration: underline;" value="#{item.level}"
						action="#{loggerEdit.editLogger}">
						<f:param name="loggerId" value="#{item.id}" />
					</ice:commandLink>
				</ice:column>
				<ice:column>
					<f:facet name="header">
						<ice:outputLabel value="#{msg['page.config.logging.table.log.category']}" />
					</f:facet>
					<ice:panelGroup>
						<ui:repeat value="#{item.categories}" var="cat">
							<ice:outputText value="#{cat}" />
						</ui:repeat>
					</ice:panelGroup>
				</ice:column>
				<ice:column>
					<f:facet name="header">
						<ice:outputLabel value="#{msg['page.config.logging.table.log.component']}" />
					</f:facet>
					<ice:panelGroup>
						<ui:repeat value="#{item.components}" var="comp">
							<ice:outputText value="#{comp}" />
						</ui:repeat>
					</ice:panelGroup>
				</ice:column>
				<ice:column>
					<f:facet name="header">
						<ice:outputLabel value="#{msg['page.config.logging.table.log.package']}" />
					</f:facet>
					<ice:panelGroup>
						<ui:repeat value="#{item.packages}" var="pac">
							<ice:outputText value="#{pac}" />
						</ui:repeat>
					</ice:panelGroup>
				</ice:column>
				<ice:column>
					<f:facet name="header">
						<ice:outputLabel value="#{msg['page.config.logging.table.log.appender']}" />
					</f:facet>
					<ice:panelGroup>
						<ui:repeat value="#{item.appenders}" var="app">
							<ice:outputText value="#{app}" />
						</ui:repeat>
					</ice:panelGroup>
				</ice:column>
			</ice:dataTable>
			<h:panelGroup layout="block" styleClass="button-bar" style="margin-bottom: 20px;">
				<idm:button value="#{msg['page.config.logging.button.addLogger']}" buttonType="positive"
					action="#{loggerEdit.addLogger}" img="/resources/images/report_add.png" />

				<idm:button value="#{msg['page.config.logging.button.deleteLogger']}" buttonType="negative"
					action="#{logging.deleteLoggers}" img="/resources/images/report_delete.png" />
			</h:panelGroup>

			<h3>#{msg['page.config.logging.appenders']}</h3>
			<ice:dataTable rows="20" value="#{logging.appenders}" var="item"
				columnWidths="auto, auto, auto, 260px, auto, 320px, auto" resizable="false">
				<ice:column>
					<f:facet name="header">
						<ice:selectBooleanCheckbox id="selectAllCheckbox" value="#{logging.selectAllAppenders}"
							valueChangeListener="#{logging.selectAllAppendersPerformed}" immediate="true" partialSubmit="true" />
					</f:facet>
					<ice:selectBooleanCheckbox id="selectCheckbox" value="#{item.selected}" partialSubmit="true"
						immediate="true" valueChangeListener="#{logging.selectAppenderPerformed}" />
				</ice:column>
				<ice:column>
					<f:facet name="header">
						<ice:outputLabel value="#{msg['page.config.logging.table.app.name']}" />
					</f:facet>
					<ice:commandLink style="text-decoration: underline;" value="#{item.name}"
						action="#{appenderEdit.editAppender}">
						<f:param name="appenderName" value="#{item.name}" />
					</ice:commandLink>
				</ice:column>
				<ice:column>
					<f:facet name="header">
						<ice:outputLabel value="#{msg['page.config.logging.table.app.type']}" />
					</f:facet>
					<ice:panelGroup style="text-align: center;">
						<ice:graphicImage value="/resources/images/#{item.type.icon}" alt="#{item.type.title}" />
					</ice:panelGroup>
				</ice:column>
				<ice:column>
					<f:facet name="header">
						<ice:outputLabel value="#{msg['page.config.logging.table.app.pattern']}" />
					</f:facet>
					<ice:outputText value="#{item.pattern}" />
				</ice:column>
				<ice:column>
					<f:facet name="header">
						<ice:outputLabel value="#{msg['page.config.logging.table.app.datePattern']}" />
					</f:facet>
					<ice:outputText value="#{item.datePattern}" />
				</ice:column>
				<ice:column>
					<f:facet name="header">
						<ice:outputLabel value="#{msg['page.config.logging.table.app.filePath']}" />
					</f:facet>
					<ice:outputText value="#{item.filePath}" />
				</ice:column>
				<ice:column>
					<f:facet name="header">
						<ice:outputLabel value="#{msg['page.config.logging.table.app.fileSize']}" />
					</f:facet>
					<ice:outputText value="#{item.maxFileSizeString}" />
				</ice:column>
			</ice:dataTable>
			<div class="button-bar">
				<idm:button value="#{msg['page.config.logging.button.addAppender']}" buttonType="positive"
					img="/resources/images/printer_add.png" action="#{appenderEdit.addAppender}" />
				<idm:button value="#{msg['page.config.logging.button.deleteAppender']}" buttonType="negative"
					img="/resources/images/printer_delete.png" action="#{logging.deleteAppenders}" />
			</div>
		</ice:form>
	</ui:define>
</ui:composition>



