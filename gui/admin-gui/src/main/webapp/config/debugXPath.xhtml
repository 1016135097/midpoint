<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition template="/resources/templates/template.xhtml" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:comp="http://java.sun.com/jsf/composite/components" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ice="http://www.icesoft.com/icefaces/component" xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:idm="http://midpoint.evolveum.com/xml/ns/custom-taglib/">

	<ui:define name="title">#{lang.messages['page.config.debugXPath.title']}</ui:define>

	<ui:define name="menu">
		<ui:include src="./menu.xhtml" />
	</ui:define>

	<ui:define name="content">
		<comp:browser okAction="#{debugXPath.okAction}" cancelAction="#{debugXPath.cancelAction}" bean="#{debugXPath.browser}" />
		<ice:form>
			<ice:outputText value="#{lang.messages['page.config.debugXPath.expression']}" />

			<ice:inputTextarea style="width: 965px;" rows="5" value="#{debugXPath.expression}" />

			<ice:panelGroup>
				<ice:outputText value="#{lang.messages['page.config.debugXPath.returnType']}" />
				<ice:selectOneMenu id="selectReturnType" style="width: auto;" partialSubmit="true" immediate="true"
					value="#{debugXPath.returnType}">
					<f:selectItems id="selectedReturnType" value="#{debugXPath.returnTypes}" />
				</ice:selectOneMenu>
			</ice:panelGroup>

			<ice:panelGrid columns="5">
				<ice:selectBooleanCheckbox value="#{debugXPath.selectAll}"
					valueChangeListener="#{debugXPath.selectAllPerformed}" immediate="true" partialSubmit="true" />
				<ice:outputText value="#{lang.messages['page.config.debugXPath.variableName']}" />
				<ice:outputText value="#{lang.messages['page.config.debugXPath.type']}" />
				<ice:outputText value="#{lang.messages['page.config.debugXPath.value']}" />
				<ice:outputLabel />

				<c:forEach items="#{debugXPath.variables}" var="item">
					<ice:selectBooleanCheckbox value="#{item.selected}" partialSubmit="true" immediate="true"
						valueChangeListener="#{debugXPath.selectPerformed}" />
					<ice:inputText value="#{item.variableName}" size="25" />
					<ice:selectOneMenu style="width: auto;" partialSubmit="true" immediate="true" value="#{item.type}">
						<f:selectItems value="#{debugXPath.types}" />
					</ice:selectOneMenu>
					<ice:inputText value="#{item.value}" size="35" />
					<idm:button value="#{lang.messages['page.config.debugXPath.button.browse']}"
						img="/resources/images/folder_explore.png" rendered="#{item.browsable}" action="#{debugXPath.browse}">
						<f:param name="variableName" value="#{item.variableName}" />
					</idm:button>
					<ice:outputLabel rendered="#{not item.browsable}" />
				</c:forEach>
			</ice:panelGrid>

			<ice:outputText value="#{lang.messages['page.config.debugXPath.result']}"
				style="margin-top: 10px; display: block;" />
			<ice:panelGroup style="min-height: 20px; width: 978px; display: block; border: 1px solid #aaa;">
				<ice:outputText value="#{debugXPath.result}" />
			</ice:panelGroup>

			<div class="button-bar">
				<idm:button action="#{debugXPath.addVariablePerformed}" id="addVariableButton" buttonType="positive"
					value="#{lang.messages['page.config.debugXPath.button.addVariable']}" img="/resources/images/add.png" />
				<idm:button action="#{debugXPath.deleteVariablesPerformed}" id="deleteVariableButton"
					buttonType="negative" value="#{lang.messages['page.config.debugXPath.button.deleteVariables']}"
					img="/resources/images/delete.png" />

				<div style="width: 50px; display: inline-block;" />

				<idm:button action="#{debugXPath.cleanupController}" id="clearButton" buttonType="negative"
					value="#{lang.messages['page.config.debugXPath.button.clear']}"
					img="/resources/images/calculator_delete.png" />
				<idm:button action="#{debugXPath.evaluate}" id="evaluateButton"
					value="#{lang.messages['page.config.debugXPath.button.evaluate']}" img="/resources/images/calculator.png" />
			</div>
		</ice:form>
	</ui:define>
</ui:composition>

