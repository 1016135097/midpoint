<?xml version="1.0" encoding="UTF-8" ?>
<!-- Copyright (c) 2011 Evolveum                             -->
<!--                                                         -->
<!-- The contents of this file are subject to the terms      -->
<!-- of the Common Development and Distribution License      -->
<!-- (the License). You may not use this file except in      -->
<!-- compliance with the License.                            -->
<!--                                                         -->
<!-- You can obtain a copy of the License at                 -->
<!-- http://www.opensource.org/licenses/cddl1 or             -->
<!-- CDDLv1.0.txt file in the source code distribution.      -->
<!-- See the License for the specific language governing     -->
<!-- permission and limitations under the License.           -->
<!--                                                         -->
<!-- If applicable, add the following below the CDDL Header, -->
<!-- with the fields enclosed by brackets [] replaced by     -->
<!-- your own identifying information:                       -->
<!--                                                         -->
<!-- Portions Copyrighted 2011 [name of copyright owner]     -->
<!-- Portions Copyrighted 2011 Michal Serbak			     -->
<!--                                                         -->
<ui:composition template="/resources/templates/template_user.xhtml"
	xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:comp="http://java.sun.com/jsf/composite/components"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ice="http://www.icesoft.com/icefaces/component"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	xmlns:idm="http://midpoint.evolveum.com/xml/ns/custom-taglib/">

	<ui:define name="title">Profile</ui:define>

	<ui:define name="menu">
		<div id="sidebarImage"></div>
	</ui:define>

	<ui:define name="content">
		<div
			style="position: absolute; background-color: #C6C6C6; width: 150px; height: 210px; border: 1px solid #767676;">
			<span
				style="position: absolute; color: #454545; font-size: 17px; margin-top: 100px; margin-left: 50px;"><b>Photo</b>
			</span>
		</div>
		<ice:form id="user-profile" style="position: absolute; margin-left: 170px; ">
			<div style="padding: 1px 0 10px 0;">
				<idm:button action="#{endUserDetails.profileBackPerformed}"
					value="#{msg['page.account.detail.button.back']}"
					rendered="#{endUserDetails.editMode}" immediate="true"
					img="/resources/images/door_in.png" />

				<idm:button actionListener="#{endUserDetails.startEditMode}"
					value="#{msg['page.account.detail.button.edit']}" id="editButton"
					img="/resources/images/user_edit.png"
					rendered="#{!endUserDetails.editMode}" immediate="true"
					action="/profile/userProfile" />

				<idm:button action="#{endUserDetails.fillUser}"
					actionListener="#{endUserDetails.saveProfilePerformed}"
					id="saveButton" buttonType="positive"
					value="#{msg['page.account.detail.button.save']}"
					img="/resources/images/user.png" rendered="#{endUserDetails.editMode}" />
			</div>
			<ice:panelGrid columns="2"
				cellpadding="6" cellspacing="6" id="userProfileGrid">

				<ice:outputText
					value="#{msg['page.account.detail.tab.user.givenName']}" />
				<ice:outputText id="givenName" value="#{endUserDetails.user.givenName}"
					rendered="#{!endUserDetails.editMode}" />
				<ice:inputText id="givenNameText"
					value="#{endUserDetails.user.givenName}"
					rendered="#{endUserDetails.editMode}" />

				<ice:outputText
					value="#{msg['page.account.detail.tab.user.familyName']}" />
				<ice:outputText id="familyName"
					value="#{endUserDetails.user.familyName}"
					rendered="#{!endUserDetails.editMode}" />
				<ice:inputText id="familyNameText"
					value="#{endUserDetails.user.familyName}"
					rendered="#{endUserDetails.editMode}" />

				<ice:outputText
					value="#{msg['page.account.detail.tab.user.fullName']}" />
				<ice:outputText id="fullName" value="#{endUserDetails.user.fullName}"
					rendered="#{!endUserDetails.editMode}" />
				<ice:inputText id="fullNameText"
					value="#{endUserDetails.user.fullName}"
					rendered="#{endUserDetails.editMode}" />

				<ui:remove>
					<ice:outputText value="#{msg['page.account.detail.tab.user.name']}" />
					<ice:outputText id="name" value="#{endUserDetails.user.name}"
						rendered="#{!endUserDetails.editMode}" />
					<ice:inputText id="nameText" value="#{endUserDetails.user.name}"
						rendered="#{endUserDetails.editMode}" />
				</ui:remove>

				<ice:outputLabel
					value="#{msg['page.account.detail.tab.user.email']}" />
				<ice:outputText id="email" rendered="#{!endUserDetails.editMode}"
					value="#{endUserDetails.user.email}" />
				<ice:inputText id="emailText" value="#{endUserDetails.user.email}"
					rendered="#{endUserDetails.editMode}" />

				<ice:outputLabel
					value="#{msg['page.account.detail.tab.user.locality']}" />
				<ice:outputText id="locality" rendered="#{!endUserDetails.editMode}"
					value="#{endUserDetails.user.locality}" />
				<ice:inputText id="localityText"
					value="#{endUserDetails.user.locality}"
					rendered="#{endUserDetails.editMode}" />
			</ice:panelGrid>

		</ice:form>

		<ice:form id="user-password"
			style="position: absolute; margin-top: 230px;">
			<div>
				<idm:button action="#{endUserDetails.passwordBackPerformed}"
					value="#{msg['page.account.detail.button.back']}"
					rendered="#{endUserDetails.editPasswordMode}" immediate="true"
					img="/resources/images/door_in.png" />

				<idm:button actionListener="#{endUserDetails.startEditPasswordMode}"
					value="Change password" id="editButton"
					img="/resources/images/user_edit.png"
					rendered="#{!endUserDetails.editPasswordMode}" immediate="true"
					action="/profile/endUserDetails" />

				<idm:button action="#{endUserDetails.fillUser}"
					actionListener="#{endUserDetails.savePasswordPerformed}"
					id="savePaswordButton" buttonType="positive" value="Change"
					img="/resources/images/user.png"
					rendered="#{endUserDetails.editPasswordMode}" />
			</div>

			<ice:panelGrid columns="2" cellpadding="6" cellspacing="6" style=""
				id="userPasswordGrid">

				<ice:outputLabel
					value="#{msg['page.account.detail.tab.user.password1']}"
					rendered="#{endUserDetails.editPasswordMode}" />
				<ice:panelGroup rendered="#{endUserDetails.editPasswordMode}">
					<ice:inputSecret id="password1"
						value="#{endUserDetails.user.password1}"
						requiredMessage="#{msg['field.required']}">
						<f:validator validatorId="PasswordValidator" />
						<f:attribute name="otherComponentId" value="password2" />
					</ice:inputSecret>
					<ice:message for="password1" errorClass="error" />
				</ice:panelGroup>

				<ice:outputLabel
					value="#{msg['page.account.detail.tab.user.password2']}"
					rendered="#{endUserDetails.editPasswordMode}" />
				<ice:panelGroup rendered="#{endUserDetails.editPasswordMode}">
					<ice:inputSecret id="password2" immediate="true"
						value="#{endUserDetails.user.password2}"
						requiredMessage="#{msg['field.required']}" />
					<ice:message for="password2" errorClass="error" />
				</ice:panelGroup>
			</ice:panelGrid>

		</ice:form>
	</ui:define>
</ui:composition>