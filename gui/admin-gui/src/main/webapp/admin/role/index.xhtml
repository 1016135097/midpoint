<?xml version="1.0" encoding="UTF-8" ?>
<ui:composition template="/resources/templates/template.xhtml" xmlns="http://www.w3.org/1999/xhtml"
	xmlns:ui="http://java.sun.com/jsf/facelets" xmlns:h="http://java.sun.com/jsf/html"
	xmlns:comp="http://java.sun.com/jsf/composite/components" xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ice="http://www.icesoft.com/icefaces/component"
	xmlns:idm="http://midpoint.evolveum.com/xml/ns/custom-taglib/">

	<ui:define name="title">#{msg['page.role.index.title']}</ui:define>

	<ui:define name="menu">
		<ui:include src="./menu.xhtml" />
	</ui:define>

	<ui:define name="content">
		<ice:form>
			<ice:panelPopup modal="true" autoCentre="true" visible="#{roleList.showPopup}">
				<f:facet name="header">
					<ice:outputText value="#{msg['page.role.index.popup.delete.title']}" />
				</f:facet>
				<f:facet id="confirm" name="body">
					<ice:outputText value="#{msg['page.role.index.popup.delete.confirm']}" />
					<div class="button-bar">
						<ice:commandButton id="deleteRoleYes" value="#{msg['page.button.yes']}" action="#{roleList.deleteRoles}" />
						<ice:commandButton id="deleteRoleNo" value="#{msg['page.button.no']}"
							action="#{roleList.hideConfirmDelete}" />
					</div>
				</f:facet>
			</ice:panelPopup>
			<ice:dataTable id="roleTable" rows="#{roleList.rowsCount}" value="#{roleList.objects}" var="role"
				sortColumn="#{roleList.sortColumnName}" sortAscending="#{roleList.ascending}"
				columnClasses="iceDatTblCol1" rowClasses="iceDatTblRow1 iceDatTblRow2" columnWidths="auto, 250px, 450px"
				resizable="false">
				<ice:column>
					<f:facet name="header">
						<ice:selectBooleanCheckbox id="deleteAllCheckbox" value="#{roleList.selectAll}"
							valueChangeListener="#{roleList.selectAllPerformed}" immediate="true" partialSubmit="true" />
					</f:facet>
					<ice:selectBooleanCheckbox id="deleteCheckbox" value="#{role.selected}" immediate="true"
						partialSubmit="true" />
				</ice:column>
				<ice:column>
					<f:facet name="header">
						<ice:commandSortHeader columnName="name" arrow="true" actionListener="#{roleList.sortItem}">
							<ice:outputText id="roleName" value="#{msg['page.role.index.table.name']}" />
						</ice:commandSortHeader>
					</f:facet>
					<ice:outputText>
						<ice:commandLink styleClass="iceOutTxt" style="text-decoration: underline;" id="name"
							value="#{role.name}" action="#{roleList.showRoleDetails}">
							<f:param name="roleOid" value="#{role.oid}" />
						</ice:commandLink>
					</ice:outputText>
				</ice:column>
				<ice:column>
					<f:facet name="header">
						<ice:commandSortHeader columnName="description" arrow="true" actionListener="#{roleList.sortItem}">
							<ice:outputText id="roleDescription" value="#{msg['page.role.index.table.description']}" />
						</ice:commandSortHeader>
					</f:facet>
					<ice:outputText id="description" value="#{role.description}" />
				</ice:column>
			</ice:dataTable>
			<ice:panelGroup styleClass="container-auto" style="text-align: center;">
				<idm:button id="goToFirst" img="/resources/images/resultset_first.png"
					value="#{msg['page.paginator.first']}" action="#{roleList.listFirst}" />
				<idm:button id="goToPrevious" img="/resources/images/resultset_previous.png"
					value="#{msg['page.paginator.previous']}" action="#{roleList.listPrevious}" />
				<idm:button id="goToNext" img="/resources/images/resultset_next.png" value="#{msg['page.paginator.next']}"
					action="#{roleList.listNext}" />
				<idm:button id="goToLast" img="/resources/images/resultset_last.png" value="#{msg['page.paginator.last']}"
					action="#{roleList.listLast}" />
			</ice:panelGroup>
			<div>
				<idm:button action="#{roleList.showConfirmDelete}" id="deleteRole" buttonType="negative"
					value="#{msg['page.button.delete']}" img="/resources/images/user_delete.png" />
			</div>
		</ice:form>
	</ui:define>
</ui:composition>