<?xml version="1.0" encoding="UTF-8" ?>
<!--
  ~ Copyright (c) 2012 Evolveum
  ~
  ~ The contents of this file are subject to the terms
  ~ of the Common Development and Distribution License
  ~ (the License). You may not use this file except in
  ~ compliance with the License.
  ~
  ~ You can obtain a copy of the License at
  ~ http://www.opensource.org/licenses/cddl1 or
  ~ CDDLv1.0.txt file in the source code distribution.
  ~ See the License for the specific language governing
  ~ permission and limitations under the License.
  ~
  ~ If applicable, add the following below the CDDL Header,
  ~ with the fields enclosed by brackets [] replaced by
  ~ your own identifying information:
  ~
  ~ Portions Copyrighted 2012 [name of copyright owner]
  -->

<ui:composition template="/resources/templates/template.xhtml"
                xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:comp="http://java.sun.com/jsf/composite/components"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ice="http://www.icesoft.com/icefaces/component"
                xmlns:idm="http://midpoint.evolveum.com/xml/ns/custom-taglib/">

    <ui:define name="title">#{msg['page.server.index.title']}</ui:define>

    <ui:define name="menu">
        <ui:include src="./menu.xhtml"/>
    </ui:define>

    <ui:define name="content">
        <ice:form>
            <ice:panelGroup>
                <ice:panelGrid columns="2" cellpadding="7" cellspacing="7">
                    <f:facet name="header">
                        <h3>Create a new task</h3>
					</f:facet>

                    <ice:outputLabel value="Task type: ">
                    </ice:outputLabel>
                    <ice:panelGrid >
                        <ice:selectOneMenu id="categoryRef"
                                           value="#{addTask.categoryRef}"
                                           style="min-width: 157px; width: auto;" partialSubmit="true">
                            <f:selectItems id="categoryRefSelected"
                                           value="#{addTask.categoryRefList}"/>
                        </ice:selectOneMenu>
                    </ice:panelGrid>

                    <ice:outputLabel value="Resource (if applicable): "></ice:outputLabel>
                    <ice:panelGrid>
                        <ice:selectOneMenu id="objectRef"
                                           value="#{addTask.resourceRef}"
                                           style="min-width: 157px; width: auto;" partialSubmit="true">
                            <f:selectItems id="objectRefSelected"
                                           value="#{addTask.resourceRefList}"/>
                        </ice:selectOneMenu>
                    </ice:panelGrid>

                    <ice:outputLabel value="Task name: "/>
                    <ice:inputText value="#{addTask.name}" />

                    <ice:selectBooleanCheckbox id="startNow" value="#{addTask.startNow}" />
                    <ice:outputLabel value="Start immediately"/>

                    <ice:outputLabel value="Schedule interval (seconds):">
                    </ice:outputLabel>
                    <ice:inputText id="scheduleInterval"
                                   value="#{addTask.scheduleInterval}"/>

                    <ice:outputLabel value="Schedule cron-like specification:"/>
                    <ice:inputText id="scheduleCronLikePattern"
                                   value="#{addTask.scheduleCronLikePattern}"/>

                    <ice:selectBooleanCheckbox id="tightlyBound" value="#{addTask.tightlyBound}" />
                    <ice:outputLabel value="Tightly bound (use if recurrent task runs often)"/>

                    <ice:outputLabel value="Notes:" />
                    <ice:outputLabel value="For one-time tasks, enter neither schedule interval nor cron-like specification. For recurring tasks, enter exactly one of these."/>
                    <ice:outputLabel value=" " />
                    <ice:outputLabel value="Tightly bound tasks are used to run short actions, which are repeating quite often (e.g. in intervals less than 1 minute). A typical example is the live synchronization. Cron-like specification is not supported for these tasks; you have to specify the time interval." />
                    <ice:outputLabel value=" " />
                    <ice:outputLabel value="Cron-like specification is in the form: SECONDS MINUTES HOURS DAY-OF-MONTH MONTH DAY-OF-WEEK YEAR (optional), e.g. '0 0 12 ? * WED' which means 'every Wednesday at 12:00:00 pm'. For more information, please see www.quartz-scheduler.org/documentation/quartz-2.1.x/tutorials/tutorial-lesson-06." />

                </ice:panelGrid>

            </ice:panelGroup>

            <div class="button-bar">
                <idm:button value="Add task" img="/resources/images/application_add.png"
                            id="addTask" action="#{addTask.savePerformed}"/>
                <idm:button value="Import task"
                            img="/resources/images/application_go.png" id="importTask"
                            immediate="true" action="/admin/config/import"
                            actionListener="#{addTask.importTaskPerformed}"/>
                <idm:button action="#{addTask.backPerformed}"
                            value="#{msg['page.account.detail.button.back']}" img="/resources/images/door_in.png"/>
            </div>
        </ice:form>
    </ui:define>
</ui:composition>