<!--
  ~ Copyright (c) 2010-2014 Evolveum
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~     http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->
<report xmlns="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
        xmlns:c="http://midpoint.evolveum.com/xml/ns/public/common/common-3"
        xmlns:t="http://prism.evolveum.com/xml/ns/public/types-3"
        xmlns:xsd="http://www.w3.org/2001/XMLSchema"
		oid="USERORGS-3333-3333-TEST-10000000000"
        version="0">
	<name>
		<orig xmlns="http://prism.evolveum.com/xml/ns/public/types-3">User orgs subreport</orig>
		<norm xmlns="http://prism.evolveum.com/xml/ns/public/types-3">User orgs subreport</norm>
	</name>
	<description>User orgs subreport for midpoint users.</description>
	<!-- flag if this report is "parent" report, used for gui -->
	<parent>false</parent>
	<template>PGphc3BlclJlcG9ydCANCgkJCXhtbG5zPSJodHRwOi8vamFzcGVycmVwb3J0cy5zb3VyY2Vmb3JnZS5uZXQvamFzcGVycmVwb3J0cyIgDQoJCQl4bWxuczp4c2k9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIiANCgkJCXhzaTpzY2hlbWFMb2NhdGlvbj0iaHR0cDovL2phc3BlcnJlcG9ydHMuc291cmNlZm9yZ2UubmV0L2phc3BlcnJlcG9ydHMgaHR0cDovL2phc3BlcnJlcG9ydHMuc291cmNlZm9yZ2UubmV0L3hzZC9qYXNwZXJyZXBvcnQueHNkIiANCgkJCW5hbWU9InJlcG9ydFVzZXJPcmdzIiANCgkJCWNvbHVtbkNvdW50PSIyIiANCgkJCXBhZ2VXaWR0aD0iMTEwIiANCgkJCXBhZ2VIZWlnaHQ9IjE4IiANCgkJCXdoZW5Ob0RhdGFUeXBlPSJBbGxTZWN0aW9uc05vRGV0YWlsIiANCgkJCWNvbHVtbldpZHRoPSI1NCIgDQoJCQljb2x1bW5TcGFjaW5nPSIxIiANCgkJCWxlZnRNYXJnaW49IjAiIA0KCQkJcmlnaHRNYXJnaW49IjAiIA0KCQkJdG9wTWFyZ2luPSIwIiANCgkJCWJvdHRvbU1hcmdpbj0iMCIgDQoJCQl1dWlkPSI2N2U0NjVjNS00NmVhLTQwZDItYmVhMC00NjljNmNmMzg5MzciPg0KCQkJPHByb3BlcnR5IG5hbWU9Im5ldC5zZi5qYXNwZXJyZXBvcnRzLmF3dC5pZ25vcmUubWlzc2luZy5mb250IiB2YWx1ZT0idHJ1ZSIvPg0KCQkJPHByb3BlcnR5IG5hbWU9Im5ldC5zZi5qYXNwZXJyZXBvcnRzLmV4cG9ydC5wZGYuZm9yY2UubGluZWJyZWFrLnBvbGljeSIgdmFsdWU9InRydWUiLz4NCgkJCTxzdHlsZSBmb250TmFtZT0iRGVqYVZ1IFNhbnMiIGZvbnRTaXplPSIxMCIgaEFsaWduPSJMZWZ0IiBpc0RlZmF1bHQ9InRydWUiIGlzUGRmRW1iZWRkZWQ9InRydWUiIA0KCQkJCSAgIG5hbWU9IkJhc2UiIHBkZkVuY29kaW5nPSJJZGVudGl0eS1IIiBwZGZGb250TmFtZT0iRGVqYVZ1U2Fucy50dGYiIHZBbGlnbj0iTWlkZGxlIj4NCgkJCTwvc3R5bGU+DQoJCQk8c3R5bGUgaXNCb2xkPSJmYWxzZSIgaXNEZWZhdWx0PSJmYWxzZSIgbmFtZT0iRGV0YWlsIiBzdHlsZT0iQmFzZSIvPg0KCQkJPHBhcmFtZXRlciBuYW1lPSJ1c2VyT2lkIiBjbGFzcz0iamF2YS5sYW5nLlN0cmluZyIvPg0KCQkJPHBhcmFtZXRlciBuYW1lPSJocWxRdWVyeU9yZ3MiIGNsYXNzPSJqYXZhLmxhbmcuU3RyaW5nIi8+DQoJCQk8cXVlcnlTdHJpbmcgbGFuZ3VhZ2U9ImhxbCI+PCFbQ0RBVEFbJFAhe2hxbFF1ZXJ5T3Jnc31dXT48L3F1ZXJ5U3RyaW5nPg0KCQkJPGZpZWxkIG5hbWU9Im9yZ05hbWUiIGNsYXNzPSJqYXZhLmxhbmcuU3RyaW5nIi8+DQoJCQk8ZGV0YWlsPg0KCQkJCTxiYW5kIGhlaWdodD0iMTgiIHNwbGl0VHlwZT0iU3RyZXRjaCI+DQoJCQkJCTxmcmFtZT4NCgkJCQkJCTxyZXBvcnRFbGVtZW50IHV1aWQ9IjNlOGZkZDZkLWE2ZmYtNDQwNy05YTFlLTVkNmI0NzA2MzAwYSIgcG9zaXRpb25UeXBlPSJGbG9hdCIgc3R5bGU9IkRldGFpbCIgbW9kZT0iT3BhcXVlIiB4PSIwIiB5PSIxIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjE3Ii8+DQoJCQkJCQk8bGluZT4NCgkJCQkJCQk8cmVwb3J0RWxlbWVudCB1dWlkPSI0N2Y5MTgwMS1jZjVmLTRiZWQtYjE5Yy1jYTM5MzFjYmY5OGQiIHBvc2l0aW9uVHlwZT0iRml4UmVsYXRpdmVUb1RvcCIgbW9kZT0iT3BhcXVlIiB4PSIwIiB5PSIwIiB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEiIGZvcmVjb2xvcj0iIzMzMzMzMyI+DQoJCQkJCQkJCTxwcmludFdoZW5FeHByZXNzaW9uPjwhW0NEQVRBW25ldyBqYXZhLmxhbmcuQm9vbGVhbigoaW50KSRWe1JFUE9SVF9DT1VOVH0uaW50VmFsdWUoKSE9MSldXT48L3ByaW50V2hlbkV4cHJlc3Npb24+DQoJCQkJCQkJPC9yZXBvcnRFbGVtZW50Pg0KCQkJCQkJCTxncmFwaGljRWxlbWVudD4NCgkJCQkJCQkJPHBlbiBsaW5lV2lkdGg9IjAuNSIgbGluZUNvbG9yPSIjOTk5OTk5Ii8+DQoJCQkJCQkJPC9ncmFwaGljRWxlbWVudD4NCgkJCQkJCTwvbGluZT4NCgkJCQkJCTx0ZXh0RmllbGQgaXNTdHJldGNoV2l0aE92ZXJmbG93PSJ0cnVlIj4NCgkJCQkJCQk8cmVwb3J0RWxlbWVudCB1dWlkPSJlYmFlZjE2ZC0yOTAzLTQwMjktOWE2Yi1kNGQyNDQ1NThhZTkiIHN0eWxlPSJEZXRhaWwiIHg9IjAiIHk9IjIiIHdpZHRoPSIxMDAiIGhlaWdodD0iMTMiLz4NCgkJCQkJCQk8dGV4dEVsZW1lbnQgdmVydGljYWxBbGlnbm1lbnQ9Ik1pZGRsZSIvPg0KCQkJCQkJCTx0ZXh0RmllbGRFeHByZXNzaW9uPjwhW0NEQVRBWyRGe29yZ05hbWV9XV0+PC90ZXh0RmllbGRFeHByZXNzaW9uPiANCgkJCQkJCTwvdGV4dEZpZWxkPg0KCQkJCQk8L2ZyYW1lPg0KCQkJCTwvYmFuZD4NCgkJCTwvZGV0YWlsPg0KCQk8L2phc3BlclJlcG9ydD4=</template>
	<orientation>landscape</orientation>
	<export>pdf</export>
	<!-- set to true if report needs hibernate session (e.g. hql query is used) -->
	<useHibernateSession>true</useHibernateSession>
	<field>
		<nameReport>orgName</nameReport>
		<nameHeader>Name</nameHeader>
		<itemPath>c:name</itemPath>
		<width>100</width>
		<classType>t:PolyStringType</classType>
	</field>
	<!-- configuration properties -->
	<configuration xmlns:r="http://midpoint.evolveum.com/xml/ns/public/report">
		<r:hqlQueryOrgs>
			select o.displayName.orig as orgName 
			from RAssignment as a, 
			ROrg as o 
			where a.targetRef.type = 18 and a.targetRef.targetOid = o.oid and a.owner.oid = $P{userOid}
		</r:hqlQueryOrgs>
	</configuration>
	<!-- report parameters configuration schema sample with different options -->
	<configurationSchema>
		<definition>
			<xsd:schema xmlns:xsd="http://www.w3.org/2001/XMLSchema"
                    xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
                    xmlns:q="http://prism.evolveum.com/xml/ns/public/query-3"
                    xmlns:a="http://prism.evolveum.com/xml/ns/public/annotation-3"
                    xmlns:r="http://midpoint.evolveum.com/xml/ns/public/report"
                    elementFormDefault="qualified"
                    targetNamespace="http://midpoint.evolveum.com/xml/ns/public/report">

				<xsd:import namespace="http://midpoint.evolveum.com/xml/ns/public/common/common-3"/>
				<xsd:import namespace="http://prism.evolveum.com/xml/ns/public/annotation-3"/>
				<xsd:import namespace="http://prism.evolveum.com/xml/ns/public/query-3"/>

				<xsd:complexType name="ConfigurationType">
					<xsd:annotation>
						<xsd:appinfo>
							<a:container/>
						</xsd:appinfo>
					</xsd:annotation>
					<xsd:sequence>
						<!-- HQL query for jasper design (queryString element) -->
						<xsd:element name="hqlQueryOrgs" type="xsd:string"/>
					</xsd:sequence>
				</xsd:complexType>
				<xsd:element name="configuration" type="r:ConfigurationType"/>
			</xsd:schema>
		</definition>
	</configurationSchema>
</report>